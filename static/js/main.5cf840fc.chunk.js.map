{"version":3,"sources":["components/MovieItem.jsx","utils/api.js","components/MovieTabs.jsx","components/App.jsx","index.js"],"names":["MovieItem","state","willWatch","getImg","props","data","backdrop_path","poster_path","className","src","alt","this","deleteMovie","addMovieToWillWatch","deleteMovieFromWillWatch","title","vote_average","type","onClick","setState","name","React","Component","API_URL","API_KEY_3","MovieTabs","nextProps","nextState","sort_by","sort_value","NavItem","value","event","updateSortBy","handleClick","App","getMovies","fetch","currenPage","then","res","json","console","log","movies","results","totalPages","total_pages","findMovies","query","movie","updateMovies","filter","item","id","updateMoviesWillWatch","moviesWillWatch","push","handlePageClick","selected","onUpdateSearch","e","q","target","length","bind","prevProps","prevState","aria-describedby","placeholder","onChange","pageCount","containerClassName","subContainerClassName","activeClassName","pageClassName","pageLinkClassName","onPageChange","previousClassName","previousLinkClassName","nextLinkClassName","nextClassName","initialPage","map","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5cf840fc.chunk.js","sourcesContent":["import React from \"react\";\nimport FA from \"react-fontawesome\";\n\nclass MovieItem extends React.Component {\n  state = {\n    willWatch: false\n  };\n\n  getImg = () => {\n\n    if(this.props.data.backdrop_path || this.props.data.poster_path){\n      return (\n        <img\n        className=\"card-img-top\"\n        src={`https://image.tmdb.org/t/p/w500${this.props.data.backdrop_path || this.props.data.poster_path}`}\n        alt=\"\"\n      />\n      )\n    }\n    return (\n      <img className=\"card-img-top\"\n      src='https://via.placeholder.com/500x281.png' alt='1'/>\n    )\n\n  }\n\n  render() {\n    const {\n      data,\n      deleteMovie,\n      addMovieToWillWatch,\n      deleteMovieFromWillWatch\n    } = this.props;\n    // props.data = {};\n    return (\n      <div className=\"card\">\n       {this.getImg()}\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{data.title}</h6>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <p className=\"mb-0\">Рейтинг: {data.vote_average}</p>\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: false\n                  });\n                  deleteMovieFromWillWatch(data);\n                }}\n              >\n                <FA name=\"heart\" />\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: true\n                  });\n                  addMovieToWillWatch(data);\n                }}\n              >\n                Буду смотреть\n              </button>\n            )}\n          </div>\n          <button\n            className=\"btn btn-danger\"\n            type=\"button\"\n            onClick={() => {\n              deleteMovie(data);\n            }}\n          >\n            <FA name=\"trash\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MovieItem;\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\";\r\n\r\nclass MovieTabs extends React.Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.sort_by !== this.props.sort_by) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ul className=\"tabs nav nav-pills mb-5\">\r\n        <NavItem\r\n          {...this.props}\r\n          sort_value={\"popularity.desc\"}\r\n          name={\"Популярное\"}\r\n        />\r\n        <NavItem {...this.props} sort_value={\"revenue.desc\"} name={\"Сборы\"} />\r\n        <NavItem\r\n          {...this.props}\r\n          sort_value={\"vote_average.desc\"}\r\n          name={\"Голоса\"}\r\n        />\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nconst NavItem = props => {\r\n  const handleClick = value => {\r\n    return event => {\r\n      props.updateSortBy(value);\r\n    };\r\n  };\r\n\r\n  const getClassLink = value => {\r\n    return `nav-link ${props.sort_by === value ? \"active\" : \"\"}`;\r\n  };\r\n\r\n  return (\r\n    <li className=\"nav-item\">\r\n      <div\r\n        className={getClassLink(props.sort_value)}\r\n        onClick={handleClick(props.sort_value)}\r\n      >\r\n        {props.name}\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default MovieTabs;\r\n","import React from \"react\";\nimport MovieItem from \"./MovieItem\";\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\nimport MovieTabs from \"./MovieTabs\";\nimport ReactPaginate from \"react-paginate\";\n\n// UI = fn(state, props)\n\n// App = new React.Component()\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      movies: [],\n      moviesWillWatch: [],\n      sort_by: \"popularity.desc\",\n      currenPage: 0,\n      totalPages: 1\n    };\n\n    this.updateSortBy = this.updateSortBy.bind(this);\n  }\n\n  componentDidMount() {\n    this.getMovies();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    //  console.log(\"didUpd\");\n    //  console.log(\"prev\", prevProps, prevState);\n    //  console.log(\"this\", this.props, this.state);\n    if (prevState.sort_by !== this.state.sort_by) {\n      this.getMovies();\n    }\n  }\n\n  getMovies = () => {\n    fetch(\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${\n        this.state.sort_by\n      }&language=ru-RU&page=${this.state.currenPage + 1}`\n    )\n      .then(res => {\n        return res.json();\n      })\n      .then(data => {\n        console.log(data);\n        this.setState({\n          movies: data.results,\n          totalPages: data.total_pages\n        });\n      });\n  };\n\n  findMovies = (query) => {\n    fetch(\n      `${API_URL}/search/movie?api_key=${API_KEY_3}&query=${query}&language=ru-RU&page=${this.state.currenPage + 1}`\n    )\n      .then(res => {\n        return res.json();\n      })\n      .then(data => {\n        console.log(data);\n        this.setState({\n          movies: data.results,\n          totalPages: data.total_pages\n        });\n      });\n  };\n\n  deleteMovie = movie => {\n    //  console.log(movie.id);\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\n    //   console.log(updateMovies);\n\n    // this.state.movies = updateMovies;\n    this.setState({\n      movies: updateMovies\n    });\n  };\n\n  addMovieToWillWatch = movie => {\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\n    updateMoviesWillWatch.push(movie);\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  deleteMovieFromWillWatch = movie => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\n      item => item.id !== movie.id\n    );\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch\n    });\n  };\n\n  updateSortBy = value => {\n    this.setState({\n      sort_by: value\n    });\n  };\n\n  handlePageClick = data => {\n    let selected = data.selected;\n    // let offset = Math.ceil(selected * this.props.perPage);\n\n    this.setState({ currenPage: selected }, () => {\n      this.getMovies();\n    });\n  };\n\n  onUpdateSearch = e => {\n    let q = e.target.value;\n\n    if(q.length > 0){\n     return this.findMovies(q);\n    }\n    return this.getMovies()\n \n  }\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-4\">\n          <div className=\"col-9\">\n            <MovieTabs\n              sort_by={this.state.sort_by}\n              updateSortBy={this.updateSortBy}\n            />\n            <input\n              type=\"text\"\n              className=\"form-control mb-4\"\n              id=\"exampleInputEmail1\"\n              aria-describedby=\"emailHelp\"\n              placeholder=\"Поиск фильмов\"\n              onChange = {this.onUpdateSearch}\n            />\n            <ReactPaginate\n              pageCount={this.state.totalPages}\n              containerClassName={\"pagination\"}\n              subContainerClassName={\"pages pagination\"}\n              activeClassName={\"active\"}\n              pageClassName={\"page-item\"}\n              pageLinkClassName={\"page-link\"}\n              onPageChange={this.handlePageClick}\n              previousClassName={\"page-item\"}\n              previousLinkClassName={\"page-link\"}\n              nextLinkClassName={\"page-link\"}\n              nextClassName={\"page-item\"}\n              initialPage={this.state.currenPage}\n            />\n            <div className=\"row\">\n              {this.state.movies.map(movie => {\n                return (\n                  <div className=\"col-6 mb-4\" key={movie.id}>\n                    <MovieItem\n                      data={movie}\n                      deleteMovie={this.deleteMovie}\n                      addMovieToWillWatch={this.addMovieToWillWatch}\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\n                    />\n                  </div>\n                );\n              })}\n              <ReactPaginate\n                pageCount={this.state.totalPages}\n                containerClassName={\"pagination\"}\n                subContainerClassName={\"pages pagination\"}\n                activeClassName={\"active\"}\n                pageClassName={\"page-item\"}\n                pageLinkClassName={\"page-link\"}\n                onPageChange={this.handlePageClick}\n                previousClassName={\"page-item\"}\n                previousLinkClassName={\"page-link\"}\n                nextLinkClassName={\"page-link\"}\n                nextClassName={\"page-item\"}\n                initialPage={this.state.currenPage}\n              />\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <h4>Буду смотреть: {this.state.moviesWillWatch.length}</h4>\n            <ul className=\"list-group\">\n              {this.state.moviesWillWatch.map(movie => (\n                <li key={movie.id} className=\"list-group-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    <p>{movie.title}</p>\n                    <p>{movie.vote_average}</p>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./stylesheets/index.scss\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}