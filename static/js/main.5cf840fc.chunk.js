(this["webpackJsonpdmgolsh-moviereact"]=this["webpackJsonpdmgolsh-moviereact"]||[]).push([[0],{12:function(e,t,a){e.exports=a(24)},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(10),c=a.n(i),o=a(11),l=a(1),r=a(2),m=a(6),u=a(4),p=a(3),v=a(7),d=a.n(v),g=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={willWatch:!1},e.getImg=function(){return e.props.data.backdrop_path||e.props.data.poster_path?s.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(e.props.data.backdrop_path||e.props.data.poster_path),alt:""}):s.a.createElement("img",{className:"card-img-top",src:"https://via.placeholder.com/500x281.png",alt:"1"})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.deleteMovie,i=t.addMovieToWillWatch,c=t.deleteMovieFromWillWatch;return s.a.createElement("div",{className:"card"},this.getImg(),s.a.createElement("div",{className:"card-body"},s.a.createElement("h6",{className:"card-title"},a.title),s.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},s.a.createElement("p",{className:"mb-0"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",a.vote_average),this.state.willWatch?s.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){e.setState({willWatch:!1}),c(a)}},s.a.createElement(d.a,{name:"heart"})):s.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){e.setState({willWatch:!0}),i(a)}},"\u0411\u0443\u0434\u0443 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c")),s.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){n(a)}},s.a.createElement(d.a,{name:"trash"}))))}}]),a}(s.a.Component),h="https://api.themoviedb.org/3",b="3f4ca4f3a9750da53450646ced312397",f=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.sort_by!==this.props.sort_by}},{key:"render",value:function(){return s.a.createElement("ul",{className:"tabs nav nav-pills mb-5"},s.a.createElement(y,Object.assign({},this.props,{sort_value:"popularity.desc",name:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0435"})),s.a.createElement(y,Object.assign({},this.props,{sort_value:"revenue.desc",name:"\u0421\u0431\u043e\u0440\u044b"})),s.a.createElement(y,Object.assign({},this.props,{sort_value:"vote_average.desc",name:"\u0413\u043e\u043b\u043e\u0441\u0430"})))}}]),a}(s.a.Component),y=function(e){var t;return s.a.createElement("li",{className:"nav-item"},s.a.createElement("div",{className:(t=e.sort_value,"nav-link ".concat(e.sort_by===t?"active":"")),onClick:function(t){return function(a){e.updateSortBy(t)}}(e.sort_value)},e.name))},N=f,E=a(8),C=a.n(E),k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).getMovies=function(){fetch("".concat(h,"/discover/movie?api_key=").concat(b,"&sort_by=").concat(e.state.sort_by,"&language=ru-RU&page=").concat(e.state.currenPage+1)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({movies:t.results,totalPages:t.total_pages})}))},e.findMovies=function(t){fetch("".concat(h,"/search/movie?api_key=").concat(b,"&query=").concat(t,"&language=ru-RU&page=").concat(e.state.currenPage+1)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({movies:t.results,totalPages:t.total_pages})}))},e.deleteMovie=function(t){var a=e.state.movies.filter((function(e){return e.id!==t.id}));e.setState({movies:a})},e.addMovieToWillWatch=function(t){var a=Object(o.a)(e.state.moviesWillWatch);a.push(t),e.setState({moviesWillWatch:a})},e.deleteMovieFromWillWatch=function(t){var a=e.state.moviesWillWatch.filter((function(e){return e.id!==t.id}));e.setState({moviesWillWatch:a})},e.updateSortBy=function(t){e.setState({sort_by:t})},e.handlePageClick=function(t){var a=t.selected;e.setState({currenPage:a},(function(){e.getMovies()}))},e.onUpdateSearch=function(t){var a=t.target.value;return a.length>0?e.findMovies(a):e.getMovies()},e.state={movies:[],moviesWillWatch:[],sort_by:"popularity.desc",currenPage:0,totalPages:1},e.updateSortBy=e.updateSortBy.bind(Object(m.a)(e)),e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by!==this.state.sort_by&&this.getMovies()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-4"},s.a.createElement("div",{className:"col-9"},s.a.createElement(N,{sort_by:this.state.sort_by,updateSortBy:this.updateSortBy}),s.a.createElement("input",{type:"text",className:"form-control mb-4",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432",onChange:this.onUpdateSearch}),s.a.createElement(C.a,{pageCount:this.state.totalPages,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",onPageChange:this.handlePageClick,previousClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item",initialPage:this.state.currenPage}),s.a.createElement("div",{className:"row"},this.state.movies.map((function(t){return s.a.createElement("div",{className:"col-6 mb-4",key:t.id},s.a.createElement(g,{data:t,deleteMovie:e.deleteMovie,addMovieToWillWatch:e.addMovieToWillWatch,deleteMovieFromWillWatch:e.deleteMovieFromWillWatch}))})),s.a.createElement(C.a,{pageCount:this.state.totalPages,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",onPageChange:this.handlePageClick,previousClassName:"page-item",previousLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item",initialPage:this.state.currenPage}))),s.a.createElement("div",{className:"col-3"},s.a.createElement("h4",null,"\u0411\u0443\u0434\u0443 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c: ",this.state.moviesWillWatch.length),s.a.createElement("ul",{className:"list-group"},this.state.moviesWillWatch.map((function(e){return s.a.createElement("li",{key:e.id,className:"list-group-item"},s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement("p",null,e.title),s.a.createElement("p",null,e.vote_average)))}))))))}}]),a}(s.a.Component);a(22),a(23);c.a.render(s.a.createElement(k,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.5cf840fc.chunk.js.map